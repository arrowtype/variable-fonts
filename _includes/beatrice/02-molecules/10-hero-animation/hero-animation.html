{% if include.text %}
  {% assign text = include.text %}
{% else %}
  {% assign text = 'Variable Typography' %}
{% endif %}

{% capture fvsMinValues %}
  {% for axis in include.axes %}
    {% capture variableName %}--text-vf-{{ axis.name }}-min{% endcapture %}
    "{{ axis.name }}" var({{ variableName }})
    {% if forloop.last %};{% else %},{% endif %}
  {% endfor %}
{% endcapture %}

{% capture cssAnimation %}
.hero-animation {
  {% for axis in include.axes %}
    --text-vf-{{ axis.name }}-min: {{ axis.default | default: axis.min }};
    --text-vf-{{ axis.name }}-max: {{ axis.default | default: axis.max }};
  {% endfor %}
  
  color: green;
  font-variation-settings: {{ fvsMinValues }};

}

@keyframes breath {
  0% {
    color: blue;
    font-variation-settings: {{ fvsMinValues }};
  }

  100% {
    color: orange;
    font-variation-settings:
      {% for axis in include.axes %}
        {% capture variableName %}--text-vf-{{ axis.name }}-max{% endcapture %}
        "{{ axis.name }}" var({{ variableName }})
        {% if forloop.last %};{% else %},{% endif %}
      {% endfor %}
  }
{% endcapture %}

<form class="js-hero"
      {% for axis in include.axes %}
        data-{{ axis.name }}-active="true"
      {% endfor %}>
  <div class="js-hero-buttons">
    {% for axis in include.axes %}
      {% capture optionId %}{{ axis.name }}_{{ forloop.index }}{% endcapture %}
      <button id="{{ optionId }}"
              data-axis="{{ axis.name }}"
              class="js-hero-button mdc-button mdc-button--raised">{{ axis.label }}</button>
    {% endfor %}
  </div>
  {% comment %}
    <pre class="js-hero-style">
      {{ cssAnimation }}
    </pre>
  {% endcomment %}
  <style class="js-hero-style">
    {{ cssAnimation }}
  </style>
  <div class="js-hero-controls">
    {% for axis in include.axes %}
      <label><strong>{{ axis.label }}</strong>
        {% include beatrice/01-atoms/02-forms/slider/md-slider.html
                   axis=axis.name
                   min=axis.min
                   max=axis.max 
                   step=axis.step %}
      </label>
    {% endfor %}
  </div>
  <div class="hero-animation pause" id="hero_animation">
    <h1 class="hero-animation__text">{{ text }}</h1>
    <div class="hero-animation__controls">
      <button id="play_pause" name="play-pause" class="mdc-button mdc-button--raised play-pause pause"><i class="material-icons mdc-button__icon" aria-hidden="true">pause</i> Click to </button>
      <div id='demo-controls' class="controls">
        {% include beatrice/02-molecules/09-slider-group/slider-group.html 
          style = 'wide'
          keyword = 'wght'
          id = 'hero-text-vf-wght'
          min = '100'
          max = '1000'
          now = '150'
          step = '1'
        %}
      </div>
    </div>
  </div>
</form>
